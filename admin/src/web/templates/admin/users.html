{% extends "layout.html" %}
{% import "_macros/form.html" as Form %}

{% block head %}
<title>Pinta Service</title>
{% endblock %}

{% block content %}
<main class="flex-1 flex flex-col">
  <h1 class="text-3xl font-semibold mt-[1em] ml-2">Usuarios</h1>

  <form method="POST" action="/admin/users">
    <input type="text" name="email" placeholder="Filtrar por correo electrÃ³nico">
    <select name="active">
        <option value="">Todos</option>
        <option value="1">Activos</option>
        <option value="0">No Activos</option>
    </select>
    <button type="submit">Filtrar</button>
  </form> 
  <ul>
    {% for user in users %}
      <li>
          {{ user.email }}
          {{ user.username }}
          {{ user.firstname }}
          {{ user.lastname }}
          
          <!-- Edit -->
          <a href="/admin/user/{{ user.id }}/edit" class="ml-2 text-blue-500">Editar</a>
          
          <!-- Activate/Deactivate -->
    
          <form method="POST" action="/admin/user/{{ user.id }}/toggle_active" style="display: inline;">
              <input type="hidden" name="_csrf_token" value="{{ csrf_token() }}"> 
              <button type="submit" class="ml-2 text-{{ 'red' if user.is_active else 'green' }}-500">
                  {{ 'Desactivar' if user.is_active else 'Activar' }}
              </button>
          </form>
          
          <!-- Delete -->
          
          <form method="POST" action="/admin/user/{{ user.id }}/delete" style="display: inline;">
              <input type="hidden" name="_method" value="DELETE"> 
              <input type="hidden" name="_csrf_token" value="{{ csrf_token() }}"> 
              <button type="submit" class="ml-2 text-red-500">Eliminar</button>
          </form>

      </li>
    {% endfor %}
  </ul>
</main>
{% endblock %}